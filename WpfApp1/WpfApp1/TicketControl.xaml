<UserControl x:Class="WpfApp1.TicketControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="Transparent">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Tiêu đề -->
        <TextBlock Text="Phản ánh / Yêu cầu cư dân"
                   FontSize="20"
                   FontWeight="Bold"
                   Margin="0 0 0 10"/>

        <!-- Thanh search + nút -->
        <StackPanel Grid.Row="1"
                    Orientation="Horizontal"
                    VerticalAlignment="Center"
                    Margin="0 0 0 10">
            <TextBox x:Name="txtSearch"
                     Width="230"
                     Height="28"
                     Margin="0 0 8 0"
                     VerticalContentAlignment="Center"/>
            <Button Content="Tìm"
                    Width="70"
                    Height="28"
                    Margin="0 0 8 0"
                    Click="BtnSearch_Click"/>
            <Button Content="Tải lại"
                    Width="80"
                    Height="28"
                    Margin="0 0 8 0"
                    Click="BtnReload_Click"/>

            <Button x:Name="btnAdd"
                    Content="Gửi phản ánh"
                    Height="28"
                    Padding="10,0"
                    Margin="16,0,0,0"
                    Click="BtnAdd_Click"/>

            <Button x:Name="btnEdit"
                    Content="Sửa / xử lý"
                    Height="28"
                    Padding="10,0"
                    Margin="8,0,0,0"
                    Click="BtnEdit_Click"/>

            <Button x:Name="btnView"
                    Content="Xem"
                    Height="28"
                    Padding="10,0"
                    Margin="8,0,0,0"
                    Click="BtnView_Click"/>

            <Button x:Name="btnDelete"
                    Content="Xóa"
                    Height="28"
                    Padding="10,0"
                    Margin="8,0,0,0"
                    Click="BtnDelete_Click"/>
        </StackPanel>

        <!-- DataGrid -->
        <DataGrid x:Name="dgTickets"
                  Grid.Row="2"
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  IsReadOnly="True"
                  ScrollViewer.HorizontalScrollBarVisibility="Auto"
                  ScrollViewer.VerticalScrollBarVisibility="Auto">

            <DataGrid.Columns>
                <DataGridTextColumn Header="ID"
                                    Binding="{Binding TicketID}"
                                    Width="60"/>
                <DataGridTextColumn Header="Cư dân"
                                    Binding="{Binding CuDanName}"
                                    Width="160"/>
                <DataGridTextColumn Header="Tiêu đề"
                                    Binding="{Binding Title}"
                                    Width="*"/>
                <DataGridTextColumn Header="Trạng thái"
                                    Binding="{Binding Status}"
                                    Width="120"/>
                <DataGridTextColumn Header="Người xử lý"
                                    Binding="{Binding AssignedName}"
                                    Width="140"/>
                <DataGridTextColumn Header="Tạo lúc"
                                    Width="160">
                    <DataGridTextColumn.Binding>
                        <Binding Path="CreatedAt"
                                 StringFormat="dd/MM/yyyy HH:mm"/>
                    </DataGridTextColumn.Binding>
                </DataGridTextColumn>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</UserControl>
